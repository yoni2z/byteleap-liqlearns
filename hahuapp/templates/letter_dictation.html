{% extends 'base.html' %} {% block content %}
<div class="container text-center mt-5">
  <h2>Letter Dictation</h2>
  <div class="mt-4">
    <h3>Listen to the sound:</h3>
    <button
      class="btn"
      onclick="playSound('{{ sound_url }}')"
      style="background: linear-gradient(to bottom, #ffefd5, #ffe4b5)"
    >
      <i class="bi bi-volume-up"></i> Play Sound
    </button>
  </div>

  <div class="mt-4">
    <h3>Download Amharic keyboard and Write the letter you hear:</h3>
    <input
      type="text"
      id="user-input"
      maxlength="1"
      class="form-control form-control-lg text-center"
      placeholder="Enter letter"
    />
  </div>

  <div class="mt-3">
    <button class="btn btn-success" onclick="checkAnswer()">Submit</button>
  </div>

  <div id="feedback" class="mt-3"></div>

  <!-- Next Letter Button -->
  <div class="mt-4">
    <button class="btn btn-secondary" onclick="refreshPage()">
      <i class="bi bi-arrow-clockwise"></i> Next Letter
    </button>
  </div>
</div>

<script>
  function playSound(url) {
    const audio = new Audio(url);
    audio.play();
  }

  function checkAnswer() {
    const userInput = document.getElementById("user-input").value.toUpperCase();
    const correctLetter = "{{ letter }}";

    const feedbackDiv = document.getElementById("feedback");
    if (userInput === correctLetter) {
      feedbackDiv.textContent = "Correct!";
      feedbackDiv.className = "alert alert-success mt-2"; // Bootstrap success alert
    } else {
      feedbackDiv.textContent =
        "Try again! The correct letter was: " + correctLetter;
      feedbackDiv.className = "alert alert-danger mt-2"; // Bootstrap danger alert
    }
  }

  function refreshPage() {
    location.reload(); // Reload the current page to get a new question
  }
</script>

<!-- Include Bootstrap 5 Icons -->
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"
/>
{% endblock %}
