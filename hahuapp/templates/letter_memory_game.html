{% extends 'base.html' %} {% block content %}
<div class="container mt-5 mb-5">
  <!-- Added mb-5 for bottom margin -->
  <div class="card shadow">
    <div class="card-body">
      <h1 class="text-center mb-4">Letter Memory Game</h1>
      <h3 class="text-center text-success">Score: {{ score }}</h3>
      <h4 class="text-center">Round: {{ rounds }}/5</h4>

      <div class="text-center mt-4">
        <audio
          id="letterSound"
          src="{{ letter_sound.sound_field.url }}"
          preload="auto"
        ></audio>
        <button
          id="playSound"
          class="btn btn-lg"
          style="background: linear-gradient(to bottom, #ffefd5, #ffe4b5)"
          onclick="document.getElementById('letterSound').play();"
        >
          Play Sound
        </button>
      </div>

      <form method="POST" class="mt-4 text-center">
        {% csrf_token %}
        <input
          type="hidden"
          name="correct_letter"
          value="{{ letter_sound.letter }}"
        />
        <div class="input-group mb-3 justify-content-center">
          <input
            type="text"
            name="user_answer"
            class="form-control"
            placeholder="Type the letter here"
            required
          />
          <button type="submit" class="btn btn-success">Submit Answer</button>
        </div>
      </form>

      <div class="text-center mt-4">
        <button
          id="playSound"
          class="btn btn-secondary"
          onclick="document.getElementById('letterSound').play();"
        >
          Play Sound Again
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  const audio = document.getElementById("letterSound");
  audio.addEventListener("ended", () => {
    document.getElementById("playSound").disabled = false; // Enable the button after sound ends
  });
</script>
{% endblock %}
